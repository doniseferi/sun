language: node_js
os:
  - windows
  - linux
  - osx
node_js:
  - "node"
  - lts/*
  - 12
  - 10
  - 8
cache:
  directories:
    - "$HOME/.npm"

before_install: 
    - npm i -g makeshift && makeshift -s @doniseferi -r https://registry.npmjs.org

after_success: 
  - npm run coverage

deploy:
  provider: npm
  email: doni.seferi@gmail.com
  api_key: $NPM_TOKEN
  on:
    tags: true
    branch: master